{"ast":null,"code":"import _defineProperty from \"C:/Users/Tri Nguyen/Desktop/project/fly-project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Tri Nguyen\\\\Desktop\\\\project\\\\fly-project\\\\pages\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport Home from \"../components/Home\";\nimport { LAYOUT_HEIGHT, LAYOUT_WIDTH, BOX_WIDTH, BOX_HEIGHT, BACKGROUND_COLOR, EXPORT_DEFAULT_PIXEL_RATIO } from \"../constants/layout\";\nimport { DragControls } from \"../shared/Control/DragControls\";\n\nvar HomePage = function HomePage() {\n  _s();\n\n  var _useState = useState([]),\n      outOfBoxObjects = _useState[0],\n      setOutOfBoxObjects = _useState[1];\n\n  var layoutRef = useRef(null);\n  var camera, scene, renderer;\n  var controls, group;\n  var objects = [];\n  useEffect(function () {\n    initializeLayout();\n  }, []);\n\n  function initializeCamera() {\n    camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 5000);\n    camera.position.z = 1000;\n    scene = new THREE.Scene();\n    scene.background = new THREE.Color(BACKGROUND_COLOR);\n    scene.add(new THREE.AmbientLight(0x505050));\n    var light = new THREE.SpotLight(0xffffff, 1.5);\n    light.position.set(0, 500, 2000);\n    light.angle = Math.PI;\n    light.castShadow = true;\n    light.shadow.camera.near = 1000;\n    light.shadow.camera.far = 4000;\n    light.shadow.mapSize.width = LAYOUT_WIDTH;\n    light.shadow.mapSize.height = LAYOUT_HEIGHT;\n    scene.add(light);\n  }\n\n  function initializeLayoutObject() {\n    group = new THREE.Group();\n    scene.add(group);\n    var geometry = new THREE.PlaneGeometry(BOX_WIDTH, BOX_HEIGHT);\n\n    for (var i = 0; i < 1; i++) {\n      var object = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({\n        color: 0x00695c\n      }));\n      object.position.x = Math.random() * 1000 - 500;\n      object.position.y = Math.random() * 600 - 300;\n      scene.add(object);\n      objects.push(object);\n    }\n  }\n\n  function initializeLayout() {\n    initializeCamera();\n    initializeLayoutObject();\n    renderer = new THREE.WebGLRenderer({\n      antialias: true\n    });\n    renderer.setPixelRatio(EXPORT_DEFAULT_PIXEL_RATIO);\n    renderer.setSize(LAYOUT_WIDTH, LAYOUT_HEIGHT);\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = THREE.PCFShadowMap;\n    layoutRef.current.appendChild(renderer.domElement);\n    controls = new DragControls([].concat(objects), camera, renderer.domElement);\n    controls.addEventListener(\"drag\", render);\n    render();\n  }\n\n  function handleOutOfBox() {\n    scene.children = scene.children.map(function (objectDetail) {\n      var position = objectDetail.position;\n      var isOutOfBox = position.x > (LAYOUT_WIDTH + BOX_WIDTH) / 2 || position.x < -(LAYOUT_WIDTH + BOX_WIDTH) / 2;\n\n      if (isOutOfBox) {\n        console.log(objectDetail);\n        return _objectSpread({}, objectDetail);\n        /*\r\n        return {\r\n          ...objectDetail,\r\n          material: {\r\n            ...objectDetail.material,\r\n            color: {\r\n              r: 0,\r\n              g: 0,\r\n              b: 0,\r\n              isColor: true,\r\n            },\r\n          },\r\n        };\r\n        */\n      }\n\n      return objectDetail;\n    });\n  }\n\n  function render() {\n    handleOutOfBox();\n    renderer.render(scene, camera);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Home, {\n      layoutRef: layoutRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Hello\", JSON.stringify(outOfBoxObjects)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(HomePage, \"htvvy43Ce9/tUch26jBq/Uxjy+k=\");\n\n_c = HomePage;\nexport default HomePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"sources":["C:/Users/Tri Nguyen/Desktop/project/fly-project/pages/index.tsx"],"names":["useState","useEffect","useRef","THREE","Home","LAYOUT_HEIGHT","LAYOUT_WIDTH","BOX_WIDTH","BOX_HEIGHT","BACKGROUND_COLOR","EXPORT_DEFAULT_PIXEL_RATIO","DragControls","HomePage","outOfBoxObjects","setOutOfBoxObjects","layoutRef","camera","scene","renderer","controls","group","objects","initializeLayout","initializeCamera","PerspectiveCamera","window","innerWidth","innerHeight","position","z","Scene","background","Color","add","AmbientLight","light","SpotLight","set","angle","Math","PI","castShadow","shadow","near","far","mapSize","width","height","initializeLayoutObject","Group","geometry","PlaneGeometry","i","object","Mesh","MeshLambertMaterial","color","x","random","y","push","WebGLRenderer","antialias","setPixelRatio","setSize","shadowMap","enabled","type","PCFShadowMap","current","appendChild","domElement","addEventListener","render","handleOutOfBox","children","map","objectDetail","isOutOfBox","console","log","JSON","stringify"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport Home from \"../components/Home\";\r\nimport {\r\n  LAYOUT_HEIGHT,\r\n  LAYOUT_WIDTH,\r\n  BOX_WIDTH,\r\n  BOX_HEIGHT,\r\n  BACKGROUND_COLOR,\r\n  EXPORT_DEFAULT_PIXEL_RATIO,\r\n} from \"../constants/layout\";\r\nimport { DragControls } from \"../shared/Control/DragControls\";\r\n\r\nconst HomePage = () => {\r\n  const [outOfBoxObjects, setOutOfBoxObjects] = useState([]);\r\n  const layoutRef = useRef(null);\r\n  let camera, scene, renderer;\r\n  let controls, group;\r\n  const objects = [];\r\n\r\n  useEffect(() => {\r\n    initializeLayout();\r\n  }, []);\r\n\r\n  function initializeCamera() {\r\n    camera = new THREE.PerspectiveCamera(\r\n      50,\r\n      window.innerWidth / window.innerHeight,\r\n      1,\r\n      5000\r\n    );\r\n    camera.position.z = 1000;\r\n\r\n    scene = new THREE.Scene();\r\n    scene.background = new THREE.Color(BACKGROUND_COLOR);\r\n\r\n    scene.add(new THREE.AmbientLight(0x505050));\r\n    const light = new THREE.SpotLight(0xffffff, 1.5);\r\n    light.position.set(0, 500, 2000);\r\n    light.angle = Math.PI;\r\n\r\n    light.castShadow = true;\r\n    light.shadow.camera.near = 1000;\r\n    light.shadow.camera.far = 4000;\r\n    light.shadow.mapSize.width = LAYOUT_WIDTH;\r\n    light.shadow.mapSize.height = LAYOUT_HEIGHT;\r\n\r\n    scene.add(light);\r\n  }\r\n\r\n  function initializeLayoutObject() {\r\n    group = new THREE.Group();\r\n    scene.add(group);\r\n\r\n    const geometry = new THREE.PlaneGeometry(BOX_WIDTH, BOX_HEIGHT);\r\n\r\n    for (let i = 0; i < 1; i++) {\r\n      const object = new THREE.Mesh(\r\n        geometry,\r\n        new THREE.MeshLambertMaterial({ color: 0x00695c })\r\n      );\r\n\r\n      object.position.x = Math.random() * 1000 - 500;\r\n      object.position.y = Math.random() * 600 - 300;\r\n\r\n      scene.add(object);\r\n      objects.push(object);\r\n    }\r\n  }\r\n\r\n  function initializeLayout() {\r\n    initializeCamera();\r\n    initializeLayoutObject();\r\n\r\n    renderer = new THREE.WebGLRenderer({ antialias: true });\r\n    renderer.setPixelRatio(EXPORT_DEFAULT_PIXEL_RATIO);\r\n    renderer.setSize(LAYOUT_WIDTH, LAYOUT_HEIGHT);\r\n\r\n    renderer.shadowMap.enabled = true;\r\n    renderer.shadowMap.type = THREE.PCFShadowMap;\r\n\r\n    layoutRef.current.appendChild(renderer.domElement);\r\n\r\n    controls = new DragControls([...objects], camera, renderer.domElement);\r\n    controls.addEventListener(\"drag\", render);\r\n    render();\r\n  }\r\n\r\n  function handleOutOfBox() {\r\n    scene.children = scene.children.map((objectDetail) => {\r\n      const { position } = objectDetail;\r\n      const isOutOfBox: boolean =\r\n        position.x > (LAYOUT_WIDTH + BOX_WIDTH) / 2 ||\r\n        position.x < -(LAYOUT_WIDTH + BOX_WIDTH) / 2;\r\n      if (isOutOfBox) {\r\n        console.log(objectDetail)\r\n        return {...objectDetail};\r\n        /*\r\n        return {\r\n          ...objectDetail,\r\n          material: {\r\n            ...objectDetail.material,\r\n            color: {\r\n              r: 0,\r\n              g: 0,\r\n              b: 0,\r\n              isColor: true,\r\n            },\r\n          },\r\n        };\r\n        */\r\n      }\r\n      return objectDetail;\r\n    });\r\n  }\r\n\r\n  function render() {\r\n    handleOutOfBox();\r\n    renderer.render(scene, camera);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Home layoutRef={layoutRef} />\r\n      <div>Hello{JSON.stringify(outOfBoxObjects)}</div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"]},"metadata":{},"sourceType":"module"}