{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Tri Nguyen\\\\Desktop\\\\project\\\\fly-project\\\\pages\\\\index.tsx\";\nimport { useEffect } from \"react\";\nimport * as THREE from \"three\";\nimport { DragControls } from \"../shared/Control/DragControls\";\n\nconst HomePage = () => {\n  let container;\n  let camera, scene, renderer;\n  let controls, group;\n  let enableSelection = false;\n  const objects = [];\n  const mouse = new THREE.Vector2();\n  const raycaster = new THREE.Raycaster();\n  useEffect(() => {\n    init();\n  }, []);\n\n  function init() {\n    container = document.getElementById(\"container\");\n    document.body.appendChild(container);\n    camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 5000);\n    camera.position.z = 1000;\n    scene = new THREE.Scene();\n    scene.background = new THREE.Color(0xf0f0f0);\n    group = new THREE.Group();\n    scene.add(group);\n    const geometry = new THREE.BoxBufferGeometry(40, 40, 40);\n\n    for (let i = 0; i < 15; i++) {\n      const object = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({\n        color: Math.random() * 0xffffff\n      }));\n      object.position.x = Math.random() * 1000 - 500;\n      object.position.y = Math.random() * 600 - 300;\n      object.position.z = Math.random() * 800 - 400;\n      object.rotation.x = Math.random() * 2 * Math.PI;\n      object.rotation.y = Math.random() * 2 * Math.PI;\n      object.rotation.z = Math.random() * 2 * Math.PI;\n      object.scale.x = Math.random() * 2 + 1;\n      object.scale.y = Math.random() * 2 + 1;\n      object.scale.z = Math.random() * 2 + 1;\n      object.castShadow = true;\n      object.receiveShadow = true;\n      scene.add(object);\n      objects.push(object);\n    }\n\n    renderer = new THREE.WebGLRenderer({\n      antialias: true\n    });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = THREE.PCFShadowMap;\n    container.appendChild(renderer.domElement);\n    controls = new DragControls([...objects], camera, renderer.domElement);\n    controls.addEventListener(\"drag\", render);\n    window.addEventListener(\"resize\", onWindowResize, false);\n    document.addEventListener(\"click\", onClick, false);\n    window.addEventListener(\"keydown\", onKeyDown, false);\n    window.addEventListener(\"keyup\", onKeyUp, false);\n    render();\n  }\n\n  function onWindowResize() {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    render();\n  }\n\n  function onKeyDown(event) {\n    enableSelection = event.keyCode === 16 ? true : false;\n  }\n\n  function onKeyUp() {\n    enableSelection = false;\n  }\n\n  function onClick(event) {\n    event.preventDefault();\n\n    if (enableSelection === true) {\n      const draggableObjects = controls.getObjects();\n      draggableObjects.length = 0;\n      mouse.x = event.clientX / window.innerWidth * 2 - 1;\n      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      raycaster.setFromCamera(mouse, camera);\n      const intersections = raycaster.intersectObjects(objects, true);\n\n      if (intersections.length > 0) {\n        const object = intersections[0].object;\n\n        if (group.children.includes(object) === true) {\n          //object.material.emissive.set(0x000000);\n          scene.attach(object);\n        } else {\n          //object.material.emissive.set(0xaaaaaa);\n          group.attach(object);\n        }\n\n        controls.transformGroup = true;\n        draggableObjects.push(group);\n      }\n\n      if (group.children.length === 0) {\n        controls.transformGroup = false;\n        draggableObjects.push(...objects);\n      }\n    }\n  }\n\n  function render() {\n    renderer.render(scene, camera);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 10\n  }, this);\n};\n\nexport default HomePage;","map":{"version":3,"sources":["C:/Users/Tri Nguyen/Desktop/project/fly-project/pages/index.tsx"],"names":["useEffect","THREE","DragControls","HomePage","container","camera","scene","renderer","controls","group","enableSelection","objects","mouse","Vector2","raycaster","Raycaster","init","document","getElementById","body","appendChild","PerspectiveCamera","window","innerWidth","innerHeight","position","z","Scene","background","Color","Group","add","geometry","BoxBufferGeometry","i","object","Mesh","MeshLambertMaterial","color","Math","random","x","y","rotation","PI","scale","castShadow","receiveShadow","push","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","shadowMap","enabled","type","PCFShadowMap","domElement","addEventListener","render","onWindowResize","onClick","onKeyDown","onKeyUp","aspect","updateProjectionMatrix","event","keyCode","preventDefault","draggableObjects","getObjects","length","clientX","clientY","setFromCamera","intersections","intersectObjects","children","includes","attach","transformGroup"],"mappings":"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","sourcesContent":["import { useEffect } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport { DragControls } from \"../shared/Control/DragControls\";\r\n\r\nconst HomePage = () => {\r\n  let container;\r\n  let camera, scene, renderer;\r\n  let controls, group;\r\n  let enableSelection = false;\r\n\r\n  const objects = [];\r\n\r\n  const mouse = new THREE.Vector2();\r\n  const raycaster = new THREE.Raycaster();\r\n\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n\r\n  function init() {\r\n    container = document.getElementById(\"container\");\r\n    document.body.appendChild(container);\r\n\r\n    camera = new THREE.PerspectiveCamera(\r\n      50,\r\n      window.innerWidth / window.innerHeight,\r\n      1,\r\n      5000\r\n    );\r\n    camera.position.z = 1000;\r\n\r\n    scene = new THREE.Scene();\r\n    scene.background = new THREE.Color(0xf0f0f0);\r\n\r\n    group = new THREE.Group();\r\n    scene.add(group);\r\n\r\n    const geometry = new THREE.BoxBufferGeometry(40, 40, 40);\r\n\r\n    for (let i = 0; i < 15; i++) {\r\n      const object = new THREE.Mesh(\r\n        geometry,\r\n        new THREE.MeshLambertMaterial({ color: Math.random() * 0xffffff })\r\n      );\r\n\r\n      object.position.x = Math.random() * 1000 - 500;\r\n      object.position.y = Math.random() * 600 - 300;\r\n      object.position.z = Math.random() * 800 - 400;\r\n\r\n      object.rotation.x = Math.random() * 2 * Math.PI;\r\n      object.rotation.y = Math.random() * 2 * Math.PI;\r\n      object.rotation.z = Math.random() * 2 * Math.PI;\r\n\r\n      object.scale.x = Math.random() * 2 + 1;\r\n      object.scale.y = Math.random() * 2 + 1;\r\n      object.scale.z = Math.random() * 2 + 1;\r\n\r\n      object.castShadow = true;\r\n      object.receiveShadow = true;\r\n\r\n      scene.add(object);\r\n\r\n      objects.push(object);\r\n    }\r\n\r\n    renderer = new THREE.WebGLRenderer({ antialias: true });\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n\r\n    renderer.shadowMap.enabled = true;\r\n    renderer.shadowMap.type = THREE.PCFShadowMap;\r\n\r\n    container.appendChild(renderer.domElement);\r\n\r\n    controls = new DragControls([...objects], camera, renderer.domElement);\r\n    controls.addEventListener(\"drag\", render);\r\n    window.addEventListener(\"resize\", onWindowResize, false);\r\n    document.addEventListener(\"click\", onClick, false);\r\n    window.addEventListener(\"keydown\", onKeyDown, false);\r\n    window.addEventListener(\"keyup\", onKeyUp, false);\r\n\r\n    render();\r\n  }\r\n\r\n  function onWindowResize() {\r\n    camera.aspect = window.innerWidth / window.innerHeight;\r\n    camera.updateProjectionMatrix();\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    render();\r\n  }\r\n\r\n  function onKeyDown(event) {\r\n    enableSelection = event.keyCode === 16 ? true : false;\r\n  }\r\n\r\n  function onKeyUp() {\r\n    enableSelection = false;\r\n  }\r\n\r\n  function onClick(event) {\r\n    event.preventDefault();\r\n\r\n    if (enableSelection === true) {\r\n      const draggableObjects = controls.getObjects();\r\n      draggableObjects.length = 0;\r\n\r\n      mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\r\n      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\r\n\r\n      raycaster.setFromCamera(mouse, camera);\r\n\r\n      const intersections = raycaster.intersectObjects(objects, true);\r\n\r\n      if (intersections.length > 0) {\r\n        const object = intersections[0].object;\r\n\r\n        if (group.children.includes(object) === true) {\r\n          //object.material.emissive.set(0x000000);\r\n          scene.attach(object);\r\n        } else {\r\n          //object.material.emissive.set(0xaaaaaa);\r\n          group.attach(object);\r\n        }\r\n\r\n        controls.transformGroup = true;\r\n        draggableObjects.push(group);\r\n      }\r\n\r\n      if (group.children.length === 0) {\r\n        controls.transformGroup = false;\r\n        draggableObjects.push(...objects);\r\n      }\r\n    }\r\n  }\r\n\r\n  function render() {\r\n    renderer.render(scene, camera);\r\n  }\r\n\r\n  return <div id=\"container\"></div>;\r\n};\r\n\r\nexport default HomePage;\r\n"]},"metadata":{},"sourceType":"module"}