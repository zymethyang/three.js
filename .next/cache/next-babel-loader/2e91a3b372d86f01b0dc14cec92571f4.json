{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Tri Nguyen\\\\Desktop\\\\project\\\\fly-project\\\\pages\\\\index.tsx\";\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport Home from \"../components/Home\";\nimport { LAYOUT_HEIGHT, LAYOUT_WIDTH, BOX_WIDTH, BACKGROUND_COLOR, EXPORT_DEFAULT_PIXEL_RATIO, TEAL_DARKEN_COLOR, RED_DARKEN_COLOR } from \"../constants/layout\";\nimport { DragControls } from \"../shared/Control/DragControls\";\n\nconst HomePage = () => {\n  const layoutRef = useRef(null);\n  let camera, scene, renderer;\n  let controls, group;\n  const objects = [];\n  useEffect(() => {\n    initializeLayout();\n  }, []);\n\n  function initializeCamera() {\n    camera = new THREE.PerspectiveCamera(50, 1, 1, 5000);\n    camera.position.z = 1000;\n    scene = new THREE.Scene();\n    scene.background = new THREE.Color(BACKGROUND_COLOR);\n    scene.add(new THREE.AmbientLight(0x505050));\n    const light = new THREE.SpotLight(0xffffff, 1.5);\n    light.position.set(0, 500, 2000);\n    light.angle = Math.PI;\n    light.castShadow = true;\n    light.shadow.camera.near = 1000;\n    light.shadow.camera.far = 4000; //light.shadow.mapSize.width = LAYOUT_WIDTH;\n    //light.shadow.mapSize.height = LAYOUT_HEIGHT;\n\n    scene.add(light);\n  }\n\n  function initializeLayoutObject() {\n    group = new THREE.Group();\n    scene.add(group);\n    const geometry = new THREE.PlaneGeometry(10, 90);\n\n    for (let i = 0; i < 1; i++) {\n      const object = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({\n        color: 0x00695c\n      }));\n      object.position.x = 0;\n      object.position.y = 0;\n      scene.add(object);\n      objects.push(object);\n    }\n  }\n\n  function initializeLayout() {\n    initializeCamera();\n    initializeLayoutObject();\n    renderer = new THREE.WebGLRenderer({\n      antialias: true\n    });\n    renderer.setPixelRatio(EXPORT_DEFAULT_PIXEL_RATIO);\n    renderer.setSize(LAYOUT_WIDTH, LAYOUT_HEIGHT);\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = THREE.PCFShadowMap;\n    layoutRef.current.appendChild(renderer.domElement);\n    controls = new DragControls([...objects], camera, renderer.domElement);\n    controls.addEventListener(\"drag\", render);\n    render();\n  }\n\n  function handleOutOfBox() {\n    scene.children = scene.children.map(objectDetail => {\n      const {\n        position\n      } = objectDetail;\n      objectDetail.type === \"Mesh\" && console.log(position.y);\n      const isOutOfBox = position.x > (LAYOUT_WIDTH - BOX_WIDTH * 1.5) / 2 || position.x < -(LAYOUT_WIDTH - BOX_WIDTH * 1.5) / 2 || position.y > LAYOUT_HEIGHT / 2 || position.y < -LAYOUT_HEIGHT / 2;\n\n      if (isOutOfBox && objectDetail.material) {\n        objectDetail.material.color = new THREE.Color(RED_DARKEN_COLOR);\n      }\n\n      if (!isOutOfBox && objectDetail.material) {\n        objectDetail.material.color = new THREE.Color(TEAL_DARKEN_COLOR);\n      }\n\n      return objectDetail;\n    });\n  }\n\n  function render() {\n    handleOutOfBox();\n    renderer.render(scene, camera);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Home, {\n      layoutRef: layoutRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\nexport default HomePage;","map":{"version":3,"sources":["C:/Users/Tri Nguyen/Desktop/project/fly-project/pages/index.tsx"],"names":["useEffect","useRef","THREE","Home","LAYOUT_HEIGHT","LAYOUT_WIDTH","BOX_WIDTH","BACKGROUND_COLOR","EXPORT_DEFAULT_PIXEL_RATIO","TEAL_DARKEN_COLOR","RED_DARKEN_COLOR","DragControls","HomePage","layoutRef","camera","scene","renderer","controls","group","objects","initializeLayout","initializeCamera","PerspectiveCamera","position","z","Scene","background","Color","add","AmbientLight","light","SpotLight","set","angle","Math","PI","castShadow","shadow","near","far","initializeLayoutObject","Group","geometry","PlaneGeometry","i","object","Mesh","MeshLambertMaterial","color","x","y","push","WebGLRenderer","antialias","setPixelRatio","setSize","shadowMap","enabled","type","PCFShadowMap","current","appendChild","domElement","addEventListener","render","handleOutOfBox","children","map","objectDetail","console","log","isOutOfBox","material"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport Home from \"../components/Home\";\r\nimport {\r\n  LAYOUT_HEIGHT,\r\n  LAYOUT_WIDTH,\r\n  BOX_WIDTH,\r\n  BOX_HEIGHT,\r\n  BACKGROUND_COLOR,\r\n  EXPORT_DEFAULT_PIXEL_RATIO,\r\n  TEAL_DARKEN_COLOR,\r\n  RED_DARKEN_COLOR,\r\n} from \"../constants/layout\";\r\nimport { DragControls } from \"../shared/Control/DragControls\";\r\n\r\nconst HomePage = () => {\r\n  const layoutRef = useRef(null);\r\n  let camera, scene, renderer;\r\n  let controls, group;\r\n  const objects = [];\r\n\r\n  useEffect(() => {\r\n    initializeLayout();\r\n  }, []);\r\n\r\n  function initializeCamera() {\r\n    camera = new THREE.PerspectiveCamera(50, 1, 1, 5000);\r\n    camera.position.z = 1000;\r\n\r\n    scene = new THREE.Scene();\r\n    scene.background = new THREE.Color(BACKGROUND_COLOR);\r\n\r\n    scene.add(new THREE.AmbientLight(0x505050));\r\n    const light = new THREE.SpotLight(0xffffff, 1.5);\r\n    light.position.set(0, 500, 2000);\r\n    light.angle = Math.PI;\r\n\r\n    light.castShadow = true;\r\n    light.shadow.camera.near = 1000;\r\n    light.shadow.camera.far = 4000;\r\n    //light.shadow.mapSize.width = LAYOUT_WIDTH;\r\n    //light.shadow.mapSize.height = LAYOUT_HEIGHT;\r\n\r\n    scene.add(light);\r\n  }\r\n\r\n  function initializeLayoutObject() {\r\n    group = new THREE.Group();\r\n    scene.add(group);\r\n    const geometry = new THREE.PlaneGeometry(10, 90);\r\n    for (let i = 0; i < 1; i++) {\r\n      const object = new THREE.Mesh(\r\n        geometry,\r\n        new THREE.MeshLambertMaterial({ color: 0x00695c })\r\n      );\r\n\r\n      object.position.x = 0;\r\n      object.position.y = 0;\r\n\r\n      scene.add(object);\r\n      objects.push(object);\r\n    }\r\n  }\r\n\r\n  function initializeLayout() {\r\n    initializeCamera();\r\n    initializeLayoutObject();\r\n\r\n    renderer = new THREE.WebGLRenderer({\r\n      antialias: true,\r\n    });\r\n    renderer.setPixelRatio(EXPORT_DEFAULT_PIXEL_RATIO);\r\n    renderer.setSize(LAYOUT_WIDTH, LAYOUT_HEIGHT);\r\n    renderer.shadowMap.enabled = true;\r\n    renderer.shadowMap.type = THREE.PCFShadowMap;\r\n    layoutRef.current.appendChild(renderer.domElement);\r\n    controls = new DragControls([...objects], camera, renderer.domElement);\r\n    controls.addEventListener(\"drag\", render);\r\n    render();\r\n  }\r\n\r\n  function handleOutOfBox() {\r\n    scene.children = scene.children.map((objectDetail) => {\r\n      const { position } = objectDetail;\r\n      objectDetail.type === \"Mesh\" && console.log(position.y);\r\n\r\n      const isOutOfBox: boolean =\r\n        position.x > (LAYOUT_WIDTH - BOX_WIDTH * 1.5) / 2 ||\r\n        position.x < -(LAYOUT_WIDTH - BOX_WIDTH * 1.5) / 2 ||\r\n        position.y > LAYOUT_HEIGHT / 2 ||\r\n        position.y < -LAYOUT_HEIGHT / 2;\r\n\r\n      if (isOutOfBox && objectDetail.material) {\r\n        objectDetail.material.color = new THREE.Color(RED_DARKEN_COLOR);\r\n      }\r\n      if (!isOutOfBox && objectDetail.material) {\r\n        objectDetail.material.color = new THREE.Color(TEAL_DARKEN_COLOR);\r\n      }\r\n      return objectDetail;\r\n    });\r\n  }\r\n\r\n  function render() {\r\n    handleOutOfBox();\r\n    renderer.render(scene, camera);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Home layoutRef={layoutRef} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"]},"metadata":{},"sourceType":"module"}